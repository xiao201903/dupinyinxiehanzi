<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>拼音田字格生成器</title>
    <style>
        /* 打印基础设置 */
        :root {
            --grid-size: 80px; /* 初始田字格大小，可调整 */
        }
        
        body { margin: 0; background: #f0f0f0; font-family: sans-serif; }
        
        /* 页面容器 */
        .page {
            width: 210mm;
            min-height: 297mm;
            padding: 20mm;
            margin: 10mm auto;
            background: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            box-sizing: border-box;
            display: flex;
            flex-wrap: wrap;
            align-content: flex-start;
        }

        /* 单词组容器 */
        .word-group {
            display: flex;
            margin-bottom: 20px;
            margin-right: 15px;
        }

        /* 单个汉字单元 */
        .char-unit {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .pinyin {
            height: 30px;
            font-size: 18px;
            color: #666;
            margin-bottom: 5px;
        }

        /* 田字格绘制 */
        .tian-zi-ge {
            width: var(--grid-size);
            height: var(--grid-size);
            border: 2px solid #ff0000;
            position: relative;
            background-image: 
                linear-gradient(to right, transparent 49%, #ff0000 50%, transparent 51%),
                linear-gradient(to bottom, transparent 49%, #ff0000 50%, transparent 51%);
            background-size: 100% 100%;
            /* 虚线效果 */
            background-image: 
                linear-gradient(to right, transparent 49.5%, #ff0000 50%, transparent 50.5%),
                linear-gradient(to bottom, transparent 49.5%, #ff0000 50%, transparent 50.5%);
            /* 加上边线和对角线可在此扩展 */
        }

        /* 打印时的样式调整 */
        @media print {
            body { background: none; }
            .page { margin: 0; box-shadow: none; }
            .no-print { display: none; }
        }

        /* 控制面板 */
        .controls {
            position: fixed;
            left: 20px;
            top: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
    </style>
</head>
<body>

<div class="controls no-print">
    <label>输入词语 (空格隔开):</label>
    <textarea id="input" rows="5">pīnyīn xuéxí</textarea>
    <label>格子大小 (px):</label>
    <input type="range" id="sizeRange" min="40" max="120" value="80">
    <button onclick="generate()">生成页面</button>
    <button onclick="window.print()">打印预览</button>
</div>

<div class="page" id="renderArea">
    </div>

<script>
    function generate() {
        const text = document.getElementById('input').value;
        const size = document.getElementById('sizeRange').value;
        const container = document.getElementById('renderArea');
        
        // 更新 CSS 变量
        document.documentElement.style.setProperty('--grid-size', size + 'px');
        
        container.innerHTML = '';
        
        const groups = text.split(/\s+/);
        groups.forEach(group => {
            if(!group) return;
            
            const groupDiv = document.createElement('div');
            groupDiv.className = 'word-group';
            
            // 假设输入的拼音用“-”分隔音节，或者简单的逻辑
            // 这里我们演示简单的：每个字母占一个格子的简化版，
            // 实际上你可能需要输入类似 "pīn-yīn" 这样的格式
            const syllables = group.split('-'); 
            
            syllables.forEach(syl => {
                const charUnit = document.createElement('div');
                charUnit.className = 'char-unit';
                charUnit.innerHTML = `
                    <div class="pinyin">${syl}</div>
                    <div class="tian-zi-ge"></div>
                `;
                groupDiv.appendChild(charUnit);
            });
            
            container.appendChild(groupDiv);
        });
    }

    // 初始化
    generate();
</script>

</body>
</html>
