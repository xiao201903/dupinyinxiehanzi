<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>çœ‹æ‹¼éŸ³å†™è¯è¯­ç»ƒä¹ ç”Ÿæˆå·¥å…·</title>

<!-- è‡ªåŠ¨æ‹¼éŸ³åº“ -->
<script src="https://unpkg.com/pinyin-pro"></script>

<style>
:root{
  --cellSize:50px;
  --gap:10px;
  --rowGap:20px;
  --pinyinSize:14px;
}
body{
  margin:0;
  font-family:"PingFang SC","Microsoft YaHei",sans-serif;
  background:#eef2f7;
}
.app{
  display:flex;
  height:100vh;
}
.sidebar{
  width:340px;
  background:#fff;
  padding:16px;
  border-right:1px solid #ddd;
  overflow:auto;
}
.header{
  font-weight:bold;
  color:#2b6cb0;
  margin-bottom:10px;
}
.block{
  border:1px solid #e5e7eb;
  border-radius:6px;
  padding:12px;
  margin-bottom:14px;
}
.block h3{
  font-size:14px;
  margin:0 0 8px;
}
input,textarea{
  width:100%;
  box-sizing:border-box;
  padding:6px;
  font-size:14px;
}
textarea{height:140px;}
.row{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:13px;
  margin:6px 0;
}
input[type=range]{flex:1;}
.count{
  text-align:right;
  font-size:12px;
  color:#666;
}
.preview{
  flex:1;
  background:#f8fafc;
  padding:10px;
  overflow:auto;
}
.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:10px;
}
.page{
  width:210mm;
  min-height:297mm;
  background:#fff;
  margin:auto;
  padding:15mm;
  box-sizing:border-box;
}
.title{
  text-align:center;
  font-weight:bold;
}
.info{
  display:flex;
  justify-content:space-between;
  margin:10px 0 20px;
  font-size:14px;
}
.words{
  display:flex;
  flex-wrap:wrap;
  gap:var(--rowGap) var(--gap);
}
.word{text-align:center;}
.pinyin{
  font-size:var(--pinyinSize);
  margin-bottom:4px;
}
.grid{
  display:grid;
  grid-template-columns:repeat(var(--charCount),var(--cellSize));
}
.cell{
  width:var(--cellSize);
  height:var(--cellSize);
  border:1px solid #000;
  position:relative;
}
.cell::before,
.cell::after{
  content:"";
  position:absolute;
  border:1px dashed #ccc;
}
.cell::before{left:50%;top:0;height:100%;}
.cell::after{top:50%;left:0;width:100%;}

button{
  background:#ff8c00;
  border:none;
  color:#fff;
  padding:6px 12px;
  border-radius:4px;
  cursor:pointer;
}

@media print{
  body{background:none;}
  .sidebar,.topbar{display:none;}
  .preview{padding:0;}
}
</style>
</head>

<body>
<div class="app">

  <!-- å·¦ä¾§ -->
  <div class="sidebar">
    <div class="header">ğŸ“˜ çœ‹æ‹¼éŸ³å†™è¯è¯­ç»ƒä¹ ç”Ÿæˆå·¥å…·</div>

    <div class="block">
      <h3>æ ‡é¢˜è®¾ç½®</h3>
      <input id="titleInput" value="æ±‰å­—æ‹¼éŸ³ç»ƒä¹ ">
      <div class="row">
        æ ‡é¢˜å¤§å°
        <input type="range" min="18" max="36" value="24" id="titleSize">
        <span id="titlePx">24px</span>
      </div>
    </div>

    <div class="block">
      <h3>è¯è¯­å½•å…¥ï¼ˆç›´æ¥è¾“å…¥æ±‰å­—ï¼‰</h3>
      <textarea id="wordsInput">ä½ å¥½
è¿™æ˜¯
æ—©ä¸Šå¥½</textarea>
      <div class="count" id="count"></div>
    </div>

    <div class="block">
      <h3>æ ¼å¼è®¾ç½®</h3>
      <div class="row">æ¯è¯å­—æ•° <input type="number" id="charCount" value="2"></div>
      <div class="row">æ ¼å­å¤§å° <input type="range" min="40" max="80" value="50" id="cellSize"></div>
      <div class="row">æ‹¼éŸ³å¤§å° <input type="range" min="10" max="24" value="14" id="pinyinSize"></div>
    </div>
  </div>

  <!-- å³ä¾§ -->
  <div class="preview">
    <div class="topbar">
      <strong>ğŸ‘€ é¢„è§ˆæ•ˆæœ</strong>
      <button onclick="window.print()">å¯¼å‡º PDF</button>
    </div>

    <div class="page">
      <div class="title" id="title">æ±‰å­—æ‹¼éŸ³ç»ƒä¹ </div>

      <div class="info">
        <div>ç­çº§ï¼š______</div>
        <div>å§“åï¼š______</div>
        <div>å¾—åˆ†ï¼š______</div>
      </div>

      <div class="words" id="words"></div>
    </div>
  </div>
</div>

<script>
function render(){
  const text=document.getElementById("wordsInput").value.trim();
  const list=text?text.split("\n"):[];
  document.getElementById("count").innerText=`å…± ${list.length} ä¸ªè¯è¯­`;

  document.getElementById("title").innerText=document.getElementById("titleInput").value;
  const tsize=document.getElementById("titleSize").value;
  document.getElementById("title").style.fontSize=tsize+"px";
  document.getElementById("titlePx").innerText=tsize+"px";

  document.documentElement.style.setProperty("--cellSize",document.getElementById("cellSize").value+"px");
  document.documentElement.style.setProperty("--pinyinSize",document.getElementById("pinyinSize").value+"px");
  document.documentElement.style.setProperty("--charCount",document.getElementById("charCount").value);

  const box=document.getElementById("words");
  box.innerHTML="";

  list.forEach(word=>{
    const py=pinyinPro.pinyin(word,{toneType:"symbol",type:"array"}).join(" ");
    const div=document.createElement("div");
    div.className="word";
    div.innerHTML=`
      <div class="pinyin">${py}</div>
      <div class="grid">
        ${"<div class='cell'></div>".repeat(document.getElementById("charCount").value)}
      </div>`;
    box.appendChild(div);
  });
}

document.querySelectorAll("input,textarea").forEach(e=>{
  e.addEventListener("input",render);
});
render();
</script>
</body>
</html>
