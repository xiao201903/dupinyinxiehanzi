<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>çœ‹æ‹¼éŸ³å†™è¯è¯­ç»ƒä¹ ç”Ÿæˆå·¥å…·</title>
<script src="https://unpkg.com/pinyin-pro"></script>

<style>
:root{
  --cell:50px;
  --gap:10px;
  --rowGap:20px;
  --pinyin:14px;
}

body{margin:0;font-family:"PingFang SC","Microsoft YaHei",sans-serif;background:#eef2f7;}
.app{display:flex;height:100vh}

/* å·¦ä¾§ */
.sidebar{
  width:360px;background:#fff;padding:16px;
  border-right:1px solid #ddd;overflow:auto
}
.header{color:#2b6cb0;font-weight:bold;margin-bottom:10px}
.block{border:1px solid #e5e7eb;border-radius:6px;padding:12px;margin-bottom:14px}
.block h3{margin:0 0 8px;font-size:14px}
.row{display:flex;align-items:center;gap:8px;font-size:13px;margin:6px 0}
input,textarea{width:100%;box-sizing:border-box;padding:6px}
textarea{height:140px}

/* å³ä¾§ */
.preview{flex:1;padding:10px;overflow:auto}
.topbar{display:flex;justify-content:space-between;align-items:center}
.page{
  width:210mm;min-height:297mm;background:#fff;
  margin:auto;padding:15mm;box-sizing:border-box
}
.title{text-align:center;font-weight:bold}
.info{display:flex;justify-content:space-between;margin:10px 0 20px}
.words{display:flex;flex-wrap:wrap;gap:var(--rowGap) var(--gap)}

.word{text-align:center}
.pinyin{font-size:var(--pinyin);margin-bottom:4px}
.grid{display:grid;grid-template-columns:repeat(var(--count),var(--cell))}
.cell{
  width:var(--cell);height:var(--cell);
  border:1px solid #000;position:relative
}

/* ç”°å­—æ ¼ */
.tian .cell::before,.tian .cell::after{
  content:"";position:absolute;border:1px dashed #ccc
}
.tian .cell::before{left:50%;top:0;height:100%}
.tian .cell::after{top:50%;left:0;width:100%}

/* ç±³å­—æ ¼ */
.mi .cell::before,.mi .cell::after,.mi .cell i{
  content:"";position:absolute;border:1px dashed #ccc
}
.mi .cell::before{left:50%;top:0;height:100%}
.mi .cell::after{top:50%;left:0;width:100%}
.mi .cell i{
  left:0;top:0;width:100%;height:100%;
  transform:rotate(45deg)
}

button{background:#ff8c00;border:none;color:#fff;padding:6px 12px;border-radius:4px}

@media print{
  body{background:none}
  .sidebar,.topbar{display:none}
  .preview{padding:0}
}
</style>
</head>

<body>
<div class="app">

<div class="sidebar">
  <div class="header">ğŸ“˜ çœ‹æ‹¼éŸ³å†™è¯è¯­ç»ƒä¹ ç”Ÿæˆå·¥å…·</div>

  <div class="block">
    <h3>æ ‡é¢˜è®¾ç½®</h3>
    <input id="titleInput" value="æ±‰å­—æ‹¼éŸ³ç»ƒä¹ ">
    <div class="row">æ ‡é¢˜å¤§å° <input type="range" min="18" max="36" value="24" id="titleSize"></div>
  </div>

  <div class="block">
    <h3>è¯è¯­å½•å…¥ï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰</h3>
    <textarea id="wordsInput">ä½ å¥½
è¿™æ˜¯
æ—©ä¸Šå¥½</textarea>
  </div>

  <div class="block">
    <h3>æ ¼å¼è®¾ç½®</h3>
    <div class="row">
      <label><input type="radio" name="grid" value="tian" checked> ç”°å­—æ ¼</label>
      <label><input type="radio" name="grid" value="mi"> ç±³å­—æ ¼</label>
    </div>
    <div class="row">æ¯è¯å­—æ•° <input id="count" type="number" value="2"></div>
    <div class="row">æ ¼å­å¤§å° <input id="cell" type="range" min="40" max="80" value="50"></div>
    <div class="row">æ‹¼éŸ³å¤§å° <input id="pinyin" type="range" min="10" max="24" value="14"></div>
  </div>
</div>

<div class="preview">
  <div class="topbar">
    <strong>ğŸ‘€ é¢„è§ˆæ•ˆæœ</strong>
    <button onclick="window.print()">å¯¼å‡ºPDF</button>
  </div>

  <div class="page">
    <div class="title" id="title">æ±‰å­—æ‹¼éŸ³ç»ƒä¹ </div>
    <div class="info">
      <div>ç­çº§ï¼š______</div>
      <div>å§“åï¼š______</div>
      <div>å¾—åˆ†ï¼š______</div>
    </div>
    <div class="words" id="words"></div>
  </div>
</div>

</div>

<script>
function render(){
  title.innerText=titleInput.value
  title.style.fontSize=titleSize.value+"px"

  document.documentElement.style.setProperty("--cell",cell.value+"px")
  document.documentElement.style.setProperty("--pinyin",pinyin.value+"px")
  document.documentElement.style.setProperty("--count",count.value)

  const type=document.querySelector("input[name=grid]:checked").value
  words.innerHTML=""

  wordsInput.value.trim().split("\n").forEach(w=>{
    const py=pinyinPro.pinyin(w,{toneType:"symbol"}).join(" ")
    const d=document.createElement("div")
    d.className="word "+type
    d.innerHTML=`
      <div class="pinyin">${py}</div>
      <div class="grid">
        ${"<div class='cell'><i></i></div>".repeat(count.value)}
      </div>`
    words.appendChild(d)
  })
}
document.querySelectorAll("input,textarea").forEach(e=>e.oninput=render)
render()
</script>
</body>
</html>
